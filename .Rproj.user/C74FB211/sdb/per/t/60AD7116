{
    "contents" : "\n\n#### Draw smiles at day ###\n### test new commit\n\nrequire(dplyr)\nrequire(tidyr)\nrequire(ggplot2)\nsource(file = 'C:\\\\Users\\\\arhipov\\\\Documents\\\\RBackup\\\\.Structure\\\\deriv_vxsmile.R')\n\nlocal( {\n  \n  all.data = read.csv(file = 'c:\\\\1\\\\data\\\\ri_smile.csv', sep = ';',header=T, dec=',')\n  all.data = all.data[-1]\n  all.data$tms = as.Date( substr( as.character(all.data$tms), 0, 10 ) )\n  \n  vx.at.date = all.data %>% filter(tms==as.Date('2010-09-06'))\n  \n  smiles = lapply( c(1:nrow(at.date)), function(x){\n    \n    strikes = seq(120000, 170000, 5000)\n    x.row = x\n    sapply(strikes, function(x){\n      \n      strike = x\n      fut    = at.date[x.row,'fut_price', drop=T]\n      tdays  = at.date[1,'t', drop=T]*250\n      coef.vector = as.vector(at.date[x.row, c('s', 'a', 'b', 'c', 'd', 'e')])\n      vxSmile(strike, fut, tdays, coef.vector)\n    \n    })\n  })\n  \n  names(smiles) = as.vector(vx.at.date$small_name)\n  smiles = gather(data = as.data.frame( c(list(strike = strikes), smiles ) ), key=strike )\n  names(smiles) = c('Strike', 'BaseFutures', 'IV')\n  ggplot(data = smiles, aes(x = Strike, y = IV, color = BaseFutures)) + geom_point() + geom_line()\n  \n  View(all.data)\n})\n",
    "created" : 1432300161816.000,
    "dirty" : false,
    "encoding" : "CP1251",
    "folds" : "",
    "hash" : "3556879177",
    "id" : "60AD7116",
    "lastKnownWriteTime" : 1434385555,
    "path" : "~/RBackup/appSmile/history_manipulation.R",
    "project_path" : "history_manipulation.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}